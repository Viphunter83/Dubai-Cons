# –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è - –°–¢–ê–¢–£–°

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (28 —è–Ω–≤ 2025)

### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω DATABASE_URL –≤ .env
**–ë—ã–ª–æ:** `DATABASE_URL=postgresql://...`  
**–°—Ç–∞–ª–æ:** `DATABASE_URL=sqlite:///storage/dubai_cons.db`  
**–§–∞–π–ª:** `.env`

### 2. ‚úÖ –£–ª—É—á—à–µ–Ω—ã –ø—Ä–æ–º–ø—Ç—ã –∏ —É–≤–µ–ª–∏—á–µ–Ω max_tokens
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- `max_tokens` —É–≤–µ–ª–∏—á–µ–Ω —Å 2000 –¥–æ 6000 –≤ `src/services/design_service.py`
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –º–∏–Ω–∏–º—É–º 500 —Å–ª–æ–≤ –Ω–∞ –∫–æ–º–Ω–∞—Ç—É –≤ –ø—Ä–æ–º–ø—Ç–µ
- –£–±—Ä–∞–Ω–æ —É—Ä–µ–∑–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è (`[:500]` —É–±—Ä–∞–Ω)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ retry –ª–æ–≥–∏–∫–∞ –¥–ª—è image generation (3 –ø–æ–ø—ã—Ç–∫–∏)

**–§–∞–π–ª—ã:** `src/services/design_service.py`, `src/ai_modules/prompts.py`

### 3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ—Å–µ—Ç—ã
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- `PROPERTY_SPECIFIC_ROOMS` —Å–ª–æ–≤–∞—Ä—å —Å –∫–æ–º–Ω–∞—Ç–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏:
  - `villa`: 8 —Ç–∏–ø–æ–≤ –ø–æ–º–µ—â–µ–Ω–∏–π
  - `apartment`: 4 —Ç–∏–ø–∞
  - `penthouse`: 6 —Ç–∏–ø–æ–≤
  - `office`: 6 —Ç–∏–ø–æ–≤ (reception, open_space, meeting_room, etc.)
  - `restaurant`: 6 —Ç–∏–ø–æ–≤ (dining_area, bar_area, professional_kitchen, etc.)
- –§—É–Ω–∫—Ü–∏—è `get_rooms_for_property_type()`
- Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∫–æ–º–Ω–∞—Ç—ã –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É property_type

**–§–∞–π–ª—ã:** `src/ai_modules/presets.py`, `frontend/src/components/DesignPresets.jsx`

### 4. ‚è≥ –°–≤—è–∑—å Design ‚Üí Estimation (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–æ)
**–î–æ–±–∞–≤–ª–µ–Ω endpoint:** `/api/v1/estimation/quick-calculate`
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç property_type, area, rooms, design_style, segment
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞—Å—á–µ—Ç –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤ "–Ω–∞ –ª–µ—Ç—É"

**–§–∞–π–ª:** `src/api/routes/estimation.py`

### 5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω retry –¥–ª—è image generation
- 3 –ø–æ–ø—ã—Ç–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 2 —Å–µ–∫—É–Ω–¥—ã
- –ü—Ä–∏ –Ω–µ—É–¥–∞—á–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∏–∑–∞–π–Ω –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

**–§–∞–π–ª:** `src/services/design_service.py`

### 6. ‚úÖ Quick calculate endpoint —Å–æ–∑–¥–∞–Ω
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ë–î
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é —Ä–∞–∑–±–∏–≤–∫—É —Å—Ç–æ–∏–º–æ—Å—Ç–∏

**–§–∞–π–ª:** `src/api/routes/estimation.py`

---

## üìù –ß—Ç–æ –ù–ï –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏):

### 4. –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Design ‚Üí Estimation
**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∏–∑–∞–π–Ω–∞" –≤ Design.jsx
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å rooms_designs –∏–∑ localStorage –≤ estimation
- –°–æ–∑–¥–∞—Ç—å UI –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –≤ Estimation.jsx
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å design_id –≤–º–µ—Å—Ç–µ —Å estimation

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `frontend/src/pages/Design.jsx`, `frontend/src/pages/Estimation.jsx`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Backend –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health:
curl http://localhost:8000/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å presets API:
curl http://localhost:8000/api/v1/presets/design-presets | jq '.property_specific_rooms'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å quick estimation:
curl -X POST http://localhost:8000/api/v1/estimation/quick-calculate \
  -H "Content-Type: application/json" \
  -d '{
    "property_type": "restaurant",
    "area": 250,
    "rooms": [
      {"type": "dining_area", "quantity": 1, "area": 100},
      {"type": "professional_kitchen", "quantity": 1, "area": 60}
    ],
    "segment": "commercial"
  }'
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–≠—Ç–∞–ø 2):

1. –î–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å Design ‚Üí Estimation –≤ frontend
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å carousel –¥–ª—è room designs
3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
4. –£–±—Ä–∞—Ç—å —É—Ä–µ–∑–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏–π –≤ UI
5. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∫–æ–º–Ω–∞—Ç
6. –í–∫–ª—é—á–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω–∞ endpoints
7. –î–æ–±–∞–≤–∏—Ç—å assumptions –≤ Estimation UI
8. –ö–Ω–æ–ø–∫–∏ Download/Export
9. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å localStorage

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2 —á–∞—Å–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Backend –≥–æ—Ç–æ–≤, ‚è≥ Frontend —Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏  
**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:** Design.jsx –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Estimation API

